<template>
  <div class="hbHistory_container">
    <head-top :head-title="hbHistoryTitle" goBack="true"></head-top>
    <section id="scroll_section" class="scroll_container">
      <ul class="hongbao_list_ul">
        <li v-for="(item,index) in datedlist" :key="index" class="hongbao_list_li">
          <section class="list-item">
            <div class="list_item_left">
              <span>¥</span>
              <span>{{String(item.amount).split('.')[0]}}</span>
              <span>.</span>
              <span>{{String(item.amount).split('.')[1] || 0}}</span>
              <p>{{item.description_map.sum_condition}}</p>
            </div>
            <div class="list_item_center">
              <p>{{item.name}}</p>
              <p>{{item.description_map.validity_periods}}</p>
              <p>{{item.description_map.phone}}</p>
            </div>
            <div class="list_item_right">
            <svg t="1617607856155" class="dated_icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2469" width="128" height="128"><path d="M334.502084 245.146744l18.898349-15.305458 24.761118 1.802931-9.46863-21.816763 9.46863-21.790822-24.761118 1.828873-18.898349-15.3314-5.823857 22.958187-21.168227 12.361103 21.168227 12.374074 5.823857 22.919275z m344.320924-26.019279l17.510482 17.601277 7.1339-22.698773 21.479524-10.285786-19.910066-14.851483-4.26737-23.943962-19.430149 13.541439-24.08664-4.539755 7.938085 23.204631-10.635997 21.181198 24.268231 0.791214z m-192.965509-27.640619l23.412163-6.615071 22.024295 11.440181-0.116737-23.749401 17.341862-16.330146-23.489987-8.1975-11.323444-21.518436L499.321114 145.272145l-24.320113 3.009208 14.566126 19.767389-3.709628 23.438104zM230.943798 333.633045l16.719267 16.836004 8.534739-22.789568 22.244797-10.986206-19.287472-13.995414-2.918413-23.632665-20.415925 14.125122-24.047728-3.618833 6.615071 22.737684-11.971981 21.38873 24.527645-0.064854z m463.664585 464.28718l-18.755672 15.266546-24.553586-1.815902 9.403777 21.777851-9.403777 21.777851 24.553586-1.828873 18.755672 15.292488 5.771973-22.932246 20.986637-12.322191-20.986637-12.322191-5.771973-22.893333z m-149.941607 41.804654L521.423233 846.33995l-21.842704-11.427211 0.090795 23.749401-17.173243 16.252322 23.295426 8.067792 11.245621 21.479524 14.293741-18.755671 24.125552-2.996238-14.46236-19.624711 3.670715-23.360279z m-181.084322-26.849406l-17.341862-17.510481-7.1339 22.646889L317.782816 828.310639l19.728476 14.773658 4.163604 23.879109 19.313413-13.528469 23.90505 4.474901-7.769466-23.126806 10.545201-21.168227-24.08664-0.739332zM512.058368 0C229.698608 0 0 229.685637 0 511.993515c0 282.294907 229.698608 512.006485 512.058368 512.006485 282.34679 0 512.045398-229.659696 512.045398-512.006485S794.392187 0 512.058368 0z m0 989.990753c-263.604089 0-478.049122-214.419091-478.049121-477.997238 0-263.591118 214.445033-478.010209 478.049121-478.01021s478.049122 214.445033 478.049122 478.01021c0 263.565177-214.445033 477.997239-478.049122 477.997238z m0-907.341279c-236.767654 0-429.395924 192.602328-429.395924 429.344041 0 236.728742 192.64124 429.33107 429.395924 429.33107s429.395924-192.589357 429.395924-429.33107c0-236.754684-192.64124-429.318099-429.395924-429.344041z m318.950182 614.488201l-17.65316-15.577844-6.835573 23.256514-21.246051 12.503781 20.000861 12.594576 4.539755 23.295426 19.196676-15.487048 23.814255 1.893726c-73.621848 109.823147-198.893131 182.277629-340.753974 182.27763-226.066804 0.025941-409.965775-183.808175-409.965775-409.900921C102.105564 285.900769 286.004535 102.079623 512.136193 102.079623s409.88795 183.89897 409.88795 409.913892A407.3846 407.3846 0 0 1 853.006903 739.33145l-8.04185-21.894587 10.311728-22.11509-24.268231 1.815902z m-150.162109-391.067425a266.750787 266.750787 0 0 0-168.762131-60.326853c-127.670868 0-237.662634 90.859944-261.554714 216.105286l16.706296 3.177828c22.309651-117.203491 125.310195-202.291461 244.809506-202.291461 57.61597 0.038912 113.44198 19.987891 158.022369 56.474546l10.778674-13.139346zM512.08431 761.251979a249.708549 249.708549 0 0 1-158.02237-56.474546l-10.778674 13.139347A266.676854 266.676854 0 0 0 512.045398 778.243632c127.670868 0 237.662634-90.872915 261.541743-216.079345l-16.706297-3.190798c-22.335592 117.216462-125.310195 202.278491-244.835446 202.27849h0.038912z m0 0" fill="#bfbfbf" p-id="2470"></path><path d="M386.929763 635.448896c20.493749-7.49708 21.259022-14.760688 12.866961-45.968257 5.305027 1.167365 10.778674 1.348956 16.135585 0.505858 8.949802 35.695441 6.446451 48.095456-24.190406 59.250282l-70.327283 25.578274c-30.079116 10.960264-41.38959 9.118421-49.807593-14.008385L237.455103 566.820778l14.08621-5.123437 11.24562 30.831419 98.084639-35.708412-17.925545-49.249851-122.171279 44.463652-5.006701-13.74897 136.45205-49.664915 31.324306 86.073746-14.293741 5.201262-3.398331-9.325953-98.11058 35.721382 18.055252 49.613032c4.319252 11.842274 9.403777 12.970727 29.702965 5.577413l71.429795-26.03225z m92.507226-55.800068c4.384106 0.946863 9.559426 2.905443 17.393746 4.526783 14.760688 3.138916 31.479955-1.24519 52.155294-8.75524 21.985383-8.002939 49.379558-19.884125 66.928952-28.392922-0.505858 4.448959-0.233473 12.231396 1.154395 16.615501-12.996669 5.797915-45.553194 18.755672-63.595476 25.279948-23.126807 8.418002-39.482894 12.023864-55.449859 8.469884-9.481602-2.088287-17.938516-6.018417-22.076177-4.526783-6.251891 2.269877-11.193738 16.628472-16.122614 32.906735l-14.566127-9.598339c6.0703-14.332654 13.009639-26.252752 20.130569-32.439788l-17.782867-48.86073-25.746894 9.377836-4.786198-13.165288 39.469923-14.371566 22.893333 62.933969z m-38.743562-86.398014c-8.469885-6.913398-25.50045-16.252321-39.327245-22.076178l8.119676-11.051059c13.748971 5.642266 30.870331 14.08621 39.729337 20.8699l-8.521768 12.257337z m92.870407-30.805477l-72.169126 26.252752-4.864023-13.346879 72.169126-26.252752-11.971981-32.893764 13.91759-5.058583 12.036835 32.880793 25.941455-9.429719 4.864022 13.333908-25.941454 9.45566 27.030995 74.244443c3.411301 9.390806 2.50335 14.410478-3.359418 18.872408-5.564442 4.591637-16.900858 9.131392-34.554017 15.564872-2.736823-4.552725-6.096242-8.703358-10.000431-12.30922 13.658176-4.552725 26.823464-9.338924 30.572004-10.71382 3.74854-1.374897 4.604608-3.164857 3.437243-6.355657l-27.10882-74.244442z m-46.850267 33.853598c13.567381 8.041851 31.246482 19.07994 40.209255 26.862376l-9.235158 11.453152c-8.820094-7.84729-26.058191-20.104627-39.884986-28.263215l8.910889-10.052313z m228.206975-10.039343l-91.716012 33.386652-4.578667-12.581606 18.236842-6.641012-27.770327-76.319759-15.785375 5.746032-4.591637-12.594576 15.785375-5.746032-8.275324-22.737685 12.724283-4.656491 8.288295 22.737685 34.009247-12.387044-8.223441-22.672832 12.957756-4.708374 8.275324 22.737685 13.748971-5.006701 4.591637 12.594577-13.74897 5.0067 27.770327 76.319759 13.74897-5.006701 4.552726 12.529723z m-49.729768 26.615932c-1.504604 16.926799-7.017163 35.111759-14.008386 48.082486a89.926052 89.926052 0 0 0-14.215917-3.969043 104.458454 104.458454 0 0 0 13.580352-42.829341l14.643951-1.284102z m-43.361141-93.415177l6.018417 16.537677 34.009247-12.374074-6.005447-16.537677-34.022217 12.374074z m16.823033 46.253613l34.035188-12.400015-6.692895-18.405462-34.022218 12.387044 6.679925 18.418433z m10.947293 30.079116l34.009247-12.387044-6.835573-18.755672-34.022217 12.374074 6.848543 18.768642z m38.536031 4.695404c10.584113 5.733061 23.477016 14.228888 29.858614 20.636427l-8.871977 10.674908c-6.122183-6.251891-19.028057-15.422195-29.767819-21.518436l8.781182-9.792899z m110.990513-13.748971c3.009209 8.275324 2.49038 13.165288-1.802931 17.264038-4.63055 4.241428-13.139347 7.769466-27.043967 12.828049a52.427679 52.427679 0 0 0-9.248128-11.959011c10.000431-3.437243 19.430149-6.861515 21.985382-8.002938 2.827619-1.024687 3.605862-2.373643 2.503351-5.382852l-16.420941-45.099219-39.664484 14.423449c6.251891 23.048982 10.246874 48.627256 5.538501 70.781258-4.410047-2.217994-9.183275-3.657745-14.08621-4.241427 6.563188-30.481209-4.864023-66.552801-14.643951-93.428148l-24.696264-67.849874 64.996314-23.658607 52.583328 144.325282z m-34.605901-52.959479l-11.349386-31.246482-38.35444 13.956502 4.591637 12.581606c2.127199 5.823857 4.254399 12.296249 6.394569 18.755671l38.71762-14.047297z m-65.151962-59.717228l10.88244 29.871584 38.341469-13.956502-10.89541-29.936438-38.328499 14.021356z m0 0" fill="#bfbfbf" p-id="2471"></path></svg>
            </div>
          </section>
        </li>
      </ul>
    </section>

  </div>
</template>

<script>
import headTop from 'components/header/header'
import {mapState, mapMutations} from 'vuex'
import {getDated} from 'network/getDate'
import BScoll from 'better-scroll'
export default {
  name:'hbHistory',
  data(){
    return {
      hbHistoryTitle:'历史红包',
      datedlist:null
    }
  },
  components:{
    headTop
  },
  mounted(){
    this.initData()
  },
  computed:{
    ...mapState([
      'userInfo',
    ]),
  },
  methods:{
    async initData(){
      if(this.userInfo){
        let datedd = await getDated(this.userInfo.user_id);
        this.datedlist = datedd.data;
        this.$nextTick(()=>{
          new BScoll('#scroll_section',
          {
            deceleration: 0.001,
            bounce: true,
            swipeTime: 1800,
            click: true,
          })
        })
      }
    }
  },
  watch:{
    userInfo:function(){
      this.initData();
    }
  }
}
</script>

<style lang="scss" scoped>
  @import 'src/style/mixin';
  .hbHistory_container{
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    background-color: #f1f1f1;
    z-index: 999;
    padding-top: 2.3rem;
  }
  .scroll_container{
    overflow: hidden;
    height: 100%;
    .hongbao_list_ul{
    padding: 0 1rem;
    .hongbao_list_li{
      margin-top: .7rem;
      background:#fff url('../../../images/getdated.png') repeat-x;
      background-size: .7rem .3rem;
      border-radius: .5rem;
      .list-item{
        padding: 1.5rem 1rem;
        display: flex;
        .list_item_left{
          flex: 2;
          border-right: 0.025rem dotted #ccc;
          span{
            &:nth-of-type(1){
              @include sc(1rem,#ccc);
              font-weight: bold;
            }
            &:nth-of-type(2){
              @include sc(2rem,#ccc);
              font-weight: 400;
            }
            &:nth-of-type(3){
              @include sc(1.5rem,#ccc);
              font-weight: bold;
            }
            &:nth-of-type(4){
              @include sc(1.1rem,#ccc);
              font-weight: bold;
            }
          }
          p{
            @include sc(.3rem,#666)
          }
        }
        .list_item_center{
          flex: 4;  
          margin-left: .5rem;
          :not(p:nth-of-type(1)){
            @include sc(.3rem,#999);

          }
        }
        .list_item_right{
          position: absolute;
          @include sc(1rem,#ccc);
          right: 2rem;
          .dated_icon{
            width: 4rem;
            height: 4rem;
            
          }
        }
      }
    }    
  }

  }


</style>