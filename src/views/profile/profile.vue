<template>
  <div>
    <head-top class="head-top" :head-title="profileTitle" goBack="true">
    </head-top>
    <div class="profile_container">
      <router-link tag="a" :to="userInfo ? '/profile/info' : '/login'" class="profile-link">
        <img class="privateImg" v-if="userInfo&&userInfo.user_id" :src="imgBaseUrl + userInfo.avatar" alt="">
        <span class="privateImg" v-else>
          <svg t="1616416605088" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2727" width="128" height="128"><path d="M707.797333 304.426667c0-114.218667-93.354667-206.805333-208.512-206.805334-115.157333 0-208.512 92.586667-208.512 206.805334 0 114.218667 93.354667 206.805333 208.512 206.805333 115.2 0 208.512-92.586667 208.512-206.805333m292.053334 656c1.365333 4.437333 2.304 9.088 2.304 13.994666 0 26.88-21.930667 48.725333-49.024 48.725334a48.853333 48.853333 0 0 1-48.981334-48.725334v-0.170666h-1.28c-12.757333-203.904-182.741333-365.482667-391.168-365.482667-208.469333 0-378.453333 161.578667-391.253333 365.482667h-1.109333v0.170666c0 26.88-21.930667 48.725333-48.981334 48.725334A48.853333 48.853333 0 0 1 21.333333 974.421333c0-4.608 0.853333-8.96 2.048-13.226666 14.250667-185.045333 131.882667-341.248 296.149334-410.88C243.2 494.976 193.28 405.589333 193.28 304.426667 193.28 136.32 330.453333 0 499.626667 0c169.216 0 306.346667 136.32 306.346666 304.426667a302.933333 302.933333 0 0 1-118.186666 239.914666c172.202667 66.005333 297.088 225.536 312.064 416.085334" fill="#515151" p-id="2728"></path></svg>
        </span>
        <div class="user-info">
          <p>{{username}}</p>
          <p>
            <span>
              <svg t="1616417364483" class="icon user-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2059" width="60" height="60"><path d="M712.5 1024H311.5A100 100 0 0 1 211.5 924V100A100 100 0 0 1 311.5 0h401a100 100 0 0 1 100 100v824a100 100 0 0 1-100 100zM311.5 80a20 20 0 0 0-20 20v824a20 20 0 0 0 20 20h401a20 20 0 0 0 20-20V100a20 20 0 0 0-20-20z" fill="#ffffff" p-id="2060"></path><path d="M580.5 170H442.5a40 40 0 0 1 0-80h138a40 40 0 0 1 0 80zM511.5 914a75 75 0 1 1 75-75 75 75 0 0 1-75 75z" fill="#ffffff" p-id="2061"></path></svg>
            </span>
            <span class="icon-mobile-phone">{{mobile}}</span>
          </p>
        </div>
        <span class="arrow">
          <svg t="1616418521766" class="icon icon_arrow" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2011" width="128" height="128"><path d="M793.61 515.719L291.36 13.45l-60.97 62.59 440.149 439.096-440.149 441.75 60.975 61.103z" fill="#ffffff" p-id="2012"></path></svg>
        </span>
      </router-link>
      <div class="info-data">
        <ul class="data_ul">
          <router-link to="/balance" class="info-data-link" tag="li">
            <span> <b>{{parseInt(balance).toFixed(2)}}</b>元</span>
            <span>我的余额</span>
          </router-link>
          <router-link to="/benefit" class="info-data-link" tag="li">
            <span><b>{{count}}</b>个</span>
            <span>我的优惠</span>
          </router-link>
          <router-link to="/points"  class="info-data-link" tag="li">
            <span><b>{{pointNumber}}</b>分</span>
            <span>我的积分</span>
          </router-link>
        </ul>
      </div>
      <div class="profile_data">
        <ul>
          <router-link tag="li" to="/order">
            <svg t="1617538681936" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2230" width="128" height="128"><path d="" p-id="2231"></path><path d="M659.55271111 685.66812445h-414.67904c-8.70627555 0-15.96302222 2.90133333-21.76910222 8.70513777-5.80494222 5.80608-8.70741333 12.87736889-8.70741334 21.21272889s2.90133333 15.59096889 8.70741334 21.76796444 13.06282667 9.26492445 21.76910222 9.26492445l-0.03299556 0.00227555h414.67904c5.80494222 0 10.88967111-1.45294222 15.25191112-4.35427555 4.36906667-2.90133333 7.81312-6.71402667 10.34695111-11.42556445 2.52700445-4.71495111 3.79221333-9.61422222 3.79221333-14.6989511 0.00113778-8.70513778-2.71587555-15.96416-8.14876444-21.77024-5.43630222-5.80266667-12.50645333-8.70513778-21.21159112-8.70513778z" p-id="2232"></path><path d="M659.55271111 502.81244445l-414.78257778 0.03413333c-8.70627555 0-15.96416 2.90133333-21.76910222 8.70741333-5.80494222 5.80494222-8.70627555 13.06055111-8.70627556 21.76910222 0 5.08359111 1.45294222 9.984 4.35541334 14.69667556 2.90133333 4.71608889 6.53653333 8.52309333 10.89991111 11.42556444 4.36565333 2.90133333 9.45038222 4.35427555 15.25532445 4.35427556h414.67790222c4.34403555 0 8.33649778-0.90680889 11.98193778-2.71701334s6.73450667-3.99246222 9.26378666-6.54677333c2.53155555-2.55431111 4.52949333-5.64451555 5.99153778-9.26606222 1.46204445-3.61927111 2.19249778-7.61514667 2.19249778-11.9808 0.00113778-8.70627555-2.71587555-15.96416-8.14876445-21.76910222-5.43516445-5.80380445-12.50531555-8.70627555-21.21045333-8.70627556z" p-id="2233"></path><path d="M659.55271111 319.96131555h-414.67904c-8.70627555 0.00113778-15.96302222 2.90133333-21.76910222 8.70741334-5.80494222 5.80380445-8.70741333 12.87281778-8.70741334 21.20931556 0 8.33649778 2.90133333 15.59324445 8.70741334 21.76796444 5.80494222 6.17699555 13.06282667 9.26492445 21.76910222 9.26492444h414.67904c8.70627555 0.00113778 15.77870222-3.08792889 21.21045334-9.26492444 5.43288889-6.17699555 8.14876445-13.43260445 8.14876444-21.76796444 0.00113778-8.33649778-2.71587555-15.40437333-8.14876444-21.20931556-5.43516445-5.80721778-12.50531555-8.70741333-21.21045334-8.70741334z" p-id="2234"></path><path d="M400.49095111 188.79260445c2.88199111 2.55544889 6.14172445 4.73656889 9.78944 6.5479111 3.64430222 1.81020445 7.27950222 2.71587555 10.90104889 2.71587556h238.37127111c8.70627555 0 15.77984-3.08679111 21.21045334-9.26378666 5.43516445-6.17699555 8.14876445-13.43374222 8.14990222-21.76910223 0-8.33536-2.71701333-15.40437333-8.14990222-21.21045333-5.43516445-5.80494222-12.50304-8.70627555-21.21045334-8.70627556l-238.40426666-0.03413333c-2.18112 0-5.08472889 0.3584-8.70627556 1.07861333-13.79328 4.36565333-20.68707555 14.16305778-20.68707556 29.39562667-0.02275555 4.36679111 0.70542222 8.36039111 2.19249778 11.9808s3.66933333 6.71288889 6.54677334 9.26606222z" p-id="2235"></path><path d="M920.70343111 174.06179555c-2.90133333-7.26812445-7.06901333-13.61806222-12.50304-19.05208888-5.43288889-5.43516445-11.78396445-9.78830222-19.05208889-13.06282667-7.26812445-3.27452445-14.88668445-4.90951111-22.84885333-4.91064889l0.03527111 0.06712889h-58.79352889v-60.95075555c0-16.69575111-5.80494222-31.02151111-17.41368889-42.97841778-11.61102222-11.95804445-25.40088889-17.94844445-41.37756444-17.97233778h-591.01980445c-15.97553778 0-29.76768 5.98926222-41.37756444 17.97233778s-17.41482667 26.30769778-17.41482667 42.97841778v731.41589333c0 16.69688889 5.80494222 31.02264889 17.41482667 42.97728 11.60874667 11.95804445 25.40088889 17.95072 41.37756444 17.97347555h59.86986667v60.95189334c0 16.69688889 5.61948445 31.01923555 16.85845333 42.97728 11.23783111 11.95804445 25.20291555 17.94844445 41.89980445 17.97347555h589.94005333c7.9872 0 15.60007111-1.63726222 22.84885334-4.91064889 7.24309333-3.2768 13.59416889-7.62993778 19.05208888-13.06055111 5.45792-5.43516445 9.62673778-11.96828445 12.50304-19.6096 2.87971555-7.64017778 4.33152-15.44078222 4.35427556-23.40522667v-731.41475555c0-8.70627555-1.44839111-16.69575111-4.35427556-23.96273778zM157.07022222 811.09902222v0l-0.00113777-741.77308444h596.81109333v741.77308444h-596.80995556zM866.33472 929.47342222v0h-589.93891555v-60.95189333h472.38940444c10.17059555 0 19.78368-2.71701333 28.83925333-8.14990222s16.31118222-12.87509333 21.76796445-22.32433778c5.45678222-9.45152 8.17379555-19.6096 8.14876444-30.47879111v-609.51096889h58.79466667v731.41703111z" p-id="2236"></path></svg><span>我的订单</span><svg t="1617539346448" class="icon_arrow" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3879" width="128" height="128"><path d="M348.417 145.822l-52.526 52.006 312.533 314.677-315.16 312.028 52.08 52.438 367.682-364.037z" fill="#CCCCCC" p-id="3880"></path></svg></router-link>

          <li>
            <a href="https://home.m.duiba.com.cn/#/chome/index">
            <svg t="1617538870162" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2021" width="128" height="128"><path d="M955.392 171.121778c0-83.968-66.104889-151.893333-147.683556-151.893334H216.348444c-81.635556 0-147.911111 67.925333-147.911111 151.893334L19.285333 852.878222c0 83.968 66.104889 151.893333 147.797334 151.893334h689.948444c81.578667 0 147.854222-67.925333 147.854222-151.893334-10.808889-148.138667-18.830222-259.128889-24.120889-333.312l-25.315555-348.444444z m-135.395556 33.621333c0 65.592889-28.842667 127.317333-81.180444 173.738667-52.337778 46.421333-121.969778 71.907556-196.039111 71.907555-73.955556 0-143.644444-25.486222-195.982222-71.907555-52.337778-46.421333-81.180444-108.145778-81.180445-173.738667v-0.625778l68.096 0.113778v0.739556c0.113778 102.115556 93.809778 185.059556 209.066667 185.059555 115.313778 0 208.896-83.057778 209.009778-185.059555v-0.625778l68.266666-0.227556v0.625778z" fill="#F87B53" p-id="2022"></path></svg><span>积分商城</span><svg t="1617539346448" class="icon_arrow" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3879" width="128" height="128"><path d="M348.417 145.822l-52.526 52.006 312.533 314.677-315.16 312.028 52.08 52.438 367.682-364.037z" fill="#CCCCCC" p-id="3880"></path></svg></a></li>

          <router-link tag="li" to='/vipcard'><svg t="1617538977909" class="icon" viewBox="0 0 1027 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3589" width="128" height="128"><path d="M0 320.853l3.413-10.24c6.827-23.893 30.72-40.96 58.027-44.373 23.893-3.413 47.787 13.653 61.44 34.133 10.24 23.894 6.827 51.2-10.24 71.68l-6.827 6.827c47.787 30.72 95.574 58.027 143.36 85.333 17.067 10.24 34.134 20.48 54.614 34.134 10.24 6.826 17.066 3.413 23.893-6.827l163.84-296.96c-23.893-13.653-37.547-30.72-40.96-58.027 0-20.48 6.827-34.133 20.48-47.786 27.307-27.307 71.68-23.894 95.573 6.826 27.307 34.134 17.067 71.68-23.893 102.4 13.653 23.894 27.307 51.2 40.96 78.507 40.96 71.68 78.507 143.36 116.053 215.04 10.24 17.067 13.654 17.067 30.72 6.827 61.44-37.547 122.88-75.094 180.907-112.64 3.413-3.414 6.827-3.414 10.24-6.827-13.653-13.653-20.48-27.307-20.48-44.373-3.413-34.134 20.48-61.44 51.2-68.267 34.133-6.827 64.853 13.653 71.68 44.373 0 3.414 3.413 3.414 3.413 6.827v23.893c-10.24 34.134-30.72 51.2-68.266 51.2 0 3.414-3.414 6.827-3.414 10.24C921.6 525.653 884.053 645.12 849.92 768c-3.413 17.067-10.24 20.48-27.307 20.48H204.8c-17.067 0-23.893-3.413-27.307-20.48-27.306-98.987-58.026-197.973-85.333-296.96-6.827-27.307-17.067-54.613-23.893-81.92-27.307 0-47.787-10.24-61.44-34.133-3.414 0-3.414-6.827-6.827-13.654v-20.48z m512 535.894h286.72c23.893 0 44.373 17.066 47.787 40.96s-13.654 47.786-37.547 51.2H225.28c-20.48 0-40.96-13.654-47.787-34.134s0-40.96 17.067-54.613c10.24-6.827 20.48-10.24 30.72-10.24 95.573 6.827 191.147 6.827 286.72 6.827z" fill="#FEB333" p-id="3590"></path></svg><span>饿了么会员卡</span><svg t="1617539346448" class="icon_arrow" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3879" width="128" height="128"><path d="M348.417 145.822l-52.526 52.006 312.533 314.677-315.16 312.028 52.08 52.438 367.682-364.037z" fill="#CCCCCC" p-id="3880"></path></svg></router-link>
        </ul>
      </div>
      <div class="profile_data">
        <ul>
          <router-link tag="li" to='/service'><svg t="1617539629217" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4972" width="128" height="128"><path d="M629.382999 494.430005l30.935 179.954998-161.521999-84.991999-161.576998 84.991999 30.827999-179.954998L237.300003 367.023006l180.654998-26.299999 80.733999-163.678999 80.841999 163.678999 180.546999 26.299999L629.382999 494.430005zM816.342997 0.00001h-635.309994A127.083999 127.083999 0 0 0 53.894004 127.030009v889.424991h59.338l131.286999-95.285999 127.137998 95.285999 127.029999-95.285999 127.137999 95.285999 127.029999-95.285999 131.286998 95.285999h59.284V127.030009A127.083999 127.083999 0 0 0 816.289997 0.00001z" fill="#3190e8" p-id="4973"></path></svg><span>服务中心</span><svg t="1617539346448" class="icon_arrow" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3879" width="128" height="128"><path d="M348.417 145.822l-52.526 52.006 312.533 314.677-315.16 312.028 52.08 52.438 367.682-364.037z" fill="#CCCCCC" p-id="3880"></path></svg></router-link>
          <router-link tag="li" to='/download'><svg t="1617539656100" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6435" width="128" height="128"><path d="M512 0C229.376 0 0 229.376 0 512s229.376 512 512 512 512-229.376 512-512S794.624 0 512 0z m145.408 773.12c-104.448 71.68-257.024 57.344-349.184-31.744-65.536-63.488-100.352-141.312-92.16-233.472 9.216-110.592 63.488-194.56 163.84-242.688 100.352-48.128 198.656-37.888 290.816 25.6 41.984 28.672 72.704 66.56 94.208 113.664 6.144 13.312 4.096 21.504-9.216 28.672-81.92 47.104-162.816 95.232-243.712 143.36-27.648 16.384-53.248 10.24-66.56-14.336-12.288-22.528-8.192-44.032 14.336-58.368 40.96-25.6 82.944-50.176 124.928-74.752 15.36-9.216 30.72-17.408 45.056-26.624 17.408-10.24 17.408-16.384 2.048-29.696-28.672-24.576-62.464-40.96-100.352-45.056-75.776-9.216-140.288 15.36-186.368 76.8-48.128 64.512-54.272 137.216-20.48 210.944 30.72 66.56 101.376 115.712 182.272 111.616 31.744 2.048 63.488-7.168 93.184-21.504 31.744-15.36 50.176-9.216 68.608 21.504 16.384 27.648 16.384 27.648-11.264 46.08z m115.712-151.552c-11.264 7.168-22.528 14.336-34.816 21.504-8.192 5.12-13.312 3.072-17.408-5.12-10.24-18.432-21.504-35.84-31.744-53.248-5.12-7.168-3.072-13.312 5.12-17.408 19.456-10.24 37.888-20.48 57.344-31.744 5.12-3.072 10.24-5.12 13.312 1.024 10.24 18.432 22.528 35.84 23.552 56.32 0 12.288-5.12 21.504-15.36 28.672z" fill="#00A0F0" p-id="6436"></path></svg><span>下载饿了么APP</span><svg t="1617539346448" class="icon_arrow" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3879" width="128" height="128"><path d="M348.417 145.822l-52.526 52.006 312.533 314.677-315.16 312.028 52.08 52.438 367.682-364.037z" fill="#CCCCCC" p-id="3880"></path></svg></router-link>
        </ul>
      </div>
    </div>
    <food-nav></food-nav>
    <transition name="router-slid" mode="out-in">
      <router-view></router-view>
    </transition>
  </div>
</template>

<script>
import headTop from 'components/header/header'
import {mapState, mapMutations} from 'vuex'
import foodNav from 'components/footer/foot_nav'
export default {
  components:{
    headTop,
    foodNav
  },
  data(){
    return {
      profileTitle:'我的',
      username:'登录/注册',
      imgBaseUrl:'//elm.cangdu.org/img/',
      mobile:'验证手机号码',
      avatar:'',
      count:0,
      pointNumber:0
    }
  },
  updated(){
    
  },
  mounted(){
      console.log('mounted1');
      this.initInfor();
      console.log(this.userInfo);
  },
  computed:{
    ...mapState([
    'userInfo',
    ]),
  },
  methods:{
    initInfor(){
      if(this.userInfo && this.userInfo.user_id){
        this.username = this.userInfo.username;
        this.mobile = this.userInfo.mobile || '暂无绑定手机号';
        this.avatar = this.userInfo.avatar;
        console.log(this.username);
        this.balance = this.userInfo.balance;
        console.log(this.balance);
        this.count = this.userInfo.gift_amount;
        this.pointNumber = this.userInfo.point;
      }else{
        this.username = '登录/注册';
        this.mobile = '暂无绑定手机号';
      }

    }
  },
  watch: {
    userInfo: function (value){
        this.initInfor()
    }
  }
}
</script>

<style lang="scss" scoped>
@import 'style/mixin';
.head-top{
  @include fj(space-between);
  align-items: center;
}
.profile_container{
  padding-top:37px;
}
.profile-link{
  background-color: $blue;
  display: block;
  display: flex;
  align-items: center;
  padding: 20px 20px;
}
.user-info{
  margin-left: 12px;
  flex-grow: 1  ;
}
.user-info p:first-of-type{
  font-weight: 700;
  font-size: 18px;
  color: #fff;
}
.user-info p:last-of-type{
  display: flex;
  align-items: center;
  font-size: 15px;
}
.user-info p:last-of-type span{
  color: #fff;
}
.privateImg{
  display: inline-block;
  @include wh(3.5rem,3.5rem);
  border-radius: 50%;
}
.user-icon{
  @include wh(1.5rem,1.5rem);
}
.icon_arrow{
  width: 14px;
  height: 14px;
}
.info-data{
  width: 100%;
  .data_ul{
    display: flex;
    background-color: #fff;
    li{
      flex:1;
      text-align: center;
      display: flex;
      flex-direction: column;
      &:nth-of-type(1){
        span{
          &:nth-of-type(1){
            padding-top: .8rem;
            padding-bottom: .2rem;
            font-size: .6rem;
            b{
              @include sc(1.7rem,#f90);
              font-weight: bold;
            }
          }
          &:nth-of-type(2){
            font-size: .5rem;
            padding-bottom: .8rem;
          }
      }
      }
      &:nth-of-type(2){
        border-right: 1px solid #f1f1f1;
        border-left: 1px solid #f1f1f1;
        span{
          &:nth-of-type(1){
            padding-top: .8rem;
            padding-bottom: .2rem;
            font-size: .6rem;
            b{
              @include sc(1.7rem,#ff5f3e);
              font-weight: bold;
            }
          }
          &:nth-of-type(2){
            font-size: .5rem;
            padding-bottom: .8rem;
          }
      }
      }
      &:nth-of-type(3){
        span{
          &:nth-of-type(1){
            padding-top: .8rem;
            padding-bottom: .2rem;
            font-size: .6rem;
            b{
              @include sc(1.7rem,#6ac20b);
              font-weight: bold;
            }
          }
          &:nth-of-type(2){
            font-size: .5rem;
            padding-bottom: .8rem;
          }
      }
      }
    }
  }
}
.profile_data{
  margin-top: .6rem;
  background-color: #fff;
  ul{
    .icon{
      width: 1rem;
      height: 1rem;
    }
    li{
      padding: .7rem 1.2rem;
      border-bottom: 1px solid #f1f1f1;
      span{
        margin-left: .3rem;
      }
      display: flex;
      align-items: center;
      .icon_arrow{
        position: absolute;
        right: .7rem;
      }
    }
    }
  }
  .router-slid-enter-active, .router-slid-leave-active {
    transition: all .4s;
  }
  .router-slid-enter, .router-slid-leave-active {
    transform: translate3d(2rem, 0, 0);
    opacity: 0;
  }
</style>